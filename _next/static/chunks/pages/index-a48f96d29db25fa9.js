(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9990)}])},9990:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return F}});var t=n(4051),o=n.n(t),a=n(5893),u=n(6574),c=n(1889),s=n(460),l=n.n(s),f=n(4842),m=u.Z.TabPane;var _=function(e){var r=e.disabled,n=e.sourceCode,t=e.setSourceCode,o=e.activeTab,i=e.handleUserTabChange,s=e.myHeight,_=(0,a.jsxs)(c.Z,{disabled:r,onClick:function(){return i(o)},children:[(0,a.jsx)(f.Z,{})," Run"]});return(0,a.jsx)("div",{className:"card-container",style:{height:"100%"},children:(0,a.jsx)(u.Z,{tabBarExtraContent:_,style:{height:"100%"},children:(0,a.jsx)(m,{tab:"main.f90",style:{height:s,overflow:"scroll"},children:(0,a.jsx)(l(),{value:n,onValueChange:function(e){return t(e)},padding:10,tabSize:4,highlight:function(e){return e},style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,minHeight:"100%",border:"0.1px solid black"}})},"1")})})},d=n(7294),p=n(5439);var h=function(e){var r=e.activeTab,n=e.output,t=e.handleUserTabChange,o=e.myHeight;return(0,a.jsxs)("div",{className:"card-container",children:[(0,a.jsx)(p.Z,{block:!0,style:{margin:"6px 0px 22px 0px"},options:["STDOUT","AST","ASR","WAT","CPP","PY"],value:r,onChange:function(e){return t(e)}}),(0,a.jsx)("pre",{children:(0,a.jsx)("div",{id:"outputBox",style:{height:o,border:"1px solid black",overflow:"scroll",fontSize:"0.9em",padding:"10px"},dangerouslySetInnerHTML:{__html:n}})})]})},g=n(4298),y=n.n(g);function v(e,r,n,t,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?r(c):Promise.resolve(c).then(t,o)}function x(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function a(e){v(i,t,o,a,u,"next",e)}function u(e){v(i,t,o,a,u,"throw",e)}a(void 0)}))}}function b(){return new Promise((function(e,r){Module.onRuntimeInitialized=function(){e({emit_ast_from_source:Module.cwrap("emit_ast_from_source","string",["string"]),emit_asr_from_source:Module.cwrap("emit_asr_from_source","string",["string"]),emit_wat_from_source:Module.cwrap("emit_wat_from_source","string",["string"]),emit_cpp_from_source:Module.cwrap("emit_cpp_from_source","string",["string"]),emit_py_from_source:Module.cwrap("emit_wat_from_source","string",["string"]),emit_wasm_from_source:Module.cwrap("emit_wasm_from_source","string",["string"])})}}))}function w(e,r,n){var t=function(e){r.push(e.toString())};return{js:{memory:e,print_i32:t,print_i64:t,print_f32:t,print_f64:t,print_str:function(n,t){var o=new Uint8Array(e.buffer,n,t),i=new TextDecoder("utf8").decode(o);r.push(i)},flush_buf:function(){n(r.join(" ")+"\n"),r=[]}}}}function T(e,r){return R.apply(this,arguments)}function R(){return(R=x(o().mark((function e(r,n){var t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,WebAssembly.instantiate(r,n);case 4:t=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",0);case 11:i=t.instance.exports._lcompilers_main,e.prev=12,i(),e.next=20;break;case 16:return e.prev=16,e.t1=e.catch(12),console.log(e.t1),e.abrupt("return",0);case 20:return e.abrupt("return",1);case 21:case"end":return e.stop()}}),e,null,[[1,7],[12,16]])})))).apply(this,arguments)}function S(e,r){return j.apply(this,arguments)}function j(){return j=x(o().mark((function e(r,n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,r.emit_ast_from_source=function(e){try{return t.emit_ast_from_source(e)}catch(r){return console.log(r),n("ERROR: AST could not be generated from the code"),0}},r.emit_asr_from_source=function(e){try{return t.emit_asr_from_source(e)}catch(r){return console.log(r),n("ERROR: ASR could not be generated from the code"),0}},r.emit_wat_from_source=function(e){try{return t.emit_wat_from_source(e)}catch(r){return console.log(r),n("ERROR: WAT could not be generated from the code"),0}},r.emit_cpp_from_source=function(e){try{return t.emit_cpp_from_source(e)}catch(r){return console.log(r),n("ERROR: CPP could not be generated from the code"),0}},r.emit_py_from_source=function(e){try{return t.emit_py_from_source(e)}catch(r){return console.log(r),n("ERROR: LLVM could not be generated from the code"),0}},r.compile_code=function(e){try{return t.emit_wasm_from_source(e)}catch(r){return console.log(r),n("ERROR: The code could not be compiled. Either there is a compile-time error or there is an issue at our end."),0}},r.execute_code=function(){var e=x(o().mark((function e(r,t){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],a=new WebAssembly.Memory({initial:10,maximum:100}),u=w(a,i,t),e.next=5,T(r,u);case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",1);case 8:return n("ERROR: The code could not be executed. Either there is a runtime error or there is an issue at our end."),e.abrupt("return",0);case 10:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();case 10:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}var k=function(e){var r=e.moduleReady,n=e.setModuleReady,t=e.lfortran_funcs,i=e.openNotification,u=e.myPrint,c=e.handleUserTabChange,s=(0,d.useCallback)(x(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t,u);case 2:n(!0),i("LFortran Module Initialized!","bottomRight"),console.log("LFortran Module Initialized!"),c("STDOUT");case 6:case"end":return e.stop()}}),e)}))),[r]);return(0,a.jsx)("div",{children:(0,a.jsx)(y(),{src:"".concat("/lcompilers_frontend","/lfortran.js"),onLoad:s})})},C=n(6348),A=n(6226),E=n(1382),P=n(9614),M=n(888),O=n(4431);function U(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function Z(e,r,n,t,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?r(c):Promise.resolve(c).then(t,o)}function z(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function a(e){Z(i,t,o,a,u,"next",e)}function u(e){Z(i,t,o,a,u,"throw",e)}a(void 0)}))}}function N(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return U(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,r)}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=new(n.n(O)()),L=(0,a.jsx)(M.Z,{style:{fontSize:24},spin:!0}),I=function(e,r){P.Z.info({message:e,placement:r})},W={emit_ast_from_source:null,emit_asr_from_source:null,emit_wat_from_source:null,emit_wasm_from_source:null,emit_cpp_from_source:null,emit_py_from_source:null,compile_code:null,execute_code:null};function F(){var e=(0,d.useState)(!1),r=e[0],n=e[1],t=(0,d.useState)("program expr2\n    implicit none\n\n    integer :: x\n\n    x = (2+3)*5\n    print *, x\n\nend program"),i=t[0],u=t[1],c=(0,d.useState)("STDOUT"),s=c[0],l=c[1],f=(0,d.useState)(""),m=f[0],p=f[1],g=(0,d.useState)(0),y=g[0],v=g[1];function x(e){return b.apply(this,arguments)}function b(){return(b=z(o().mark((function e(r){var n,t,a,u,c,s,f,m,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("STDOUT"!=r){e.next=15;break}if(!(n=W.compile_code(i))){e.next=13;break}if(t=N(n.split(",")),a=t[0],u=t.slice(1),"0"===a){e.next=8;break}p(H.ansi_to_html(u)),e.next=13;break;case 8:return c=[],e.next=11,W.execute_code(new Uint8Array(u),(function(e){return c.push(e)}));case 11:e.sent&&p(c.join(""));case 13:e.next=16;break;case 15:"AST"==r?(s=W.emit_ast_from_source(i))&&p(H.ansi_to_html(s)):"ASR"==r?(f=W.emit_asr_from_source(i))&&p(H.ansi_to_html(f)):"WAT"==r?(m=W.emit_wat_from_source(i))&&p(H.ansi_to_html(m)):"CPP"==r?(_=W.emit_cpp_from_source(i))&&p(H.ansi_to_html(_)):"PY"==r?p("Support for PY is not yet enabled"):(console.log("Unknown key:",r),p("Unknown key: "+r));case 16:l(r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.useEffect)((function(){var e=function(){var e=window.innerWidth<window.innerHeight?window.innerWidth-40:window.innerHeight-182;v(e)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k,{moduleReady:r,setModuleReady:n,lfortran_funcs:W,openNotification:I,myPrint:p,handleUserTabChange:x}),(0,a.jsxs)(C.Z,{gutter:[16,16],children:[(0,a.jsx)(A.Z,{xs:{span:24},sm:{span:24},md:{span:12},children:(0,a.jsx)(_,{disabled:!r,sourceCode:i,setSourceCode:u,activeTab:s,handleUserTabChange:x,myHeight:y})}),(0,a.jsx)(A.Z,{xs:{span:24},sm:{span:24},md:{span:12},children:r?(0,a.jsx)(h,{activeTab:s,output:m,handleUserTabChange:x,myHeight:y}):(0,a.jsx)(E.Z,{style:{position:"relative",top:"50%",left:"50%"},indicator:L})})]})]})}}},function(e){e.O(0,[32,774,888,179],(function(){return r=5557,e(e.s=r);var r}));var r=e.O();_N_E=r}]);